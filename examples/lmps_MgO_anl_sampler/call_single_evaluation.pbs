#!/bin/sh

# Job name to be reported by qstat
#PBS -N Job_name

# Declare Job, non-rerunable
#PBS -r n

# Specify name for output log file
#PBS -o Log_file_name

# Join standard output and error so we only get one logfile
#PBS -j oe

# Mail to user on a=abort, b=begin, e=end
#PBS -m aeb

# set the email address where job-related notifications will be sent
#PBS -M email@anl.gov

# Number of nodes 
#PBS -l nodes=1:ppn=16

# Specify CPU time needed
#PBS -l walltime=00:20:00

# Select queue 
#PBS -q shared

export PYTHONPATH="${PYTHONPATH}:/home/jlarson/research/superchwm/codes/pyflamestk_20161019/" # For Eugene's multi-objective optimization problem
cd $PBS_O_WORKDIR

# A little useful information for the log file...
echo Master process running on: $HOSTNAME
echo Directory is:  $PWD
echo PBS has allocated the following nodes:
cat $PBS_NODEFILE
NPROCS="$(wc -l < $PBS_NODEFILE)"
echo This job has allocated $NPROCS cores

# Put in a timestamp
echo Starting executation at: `date`

pwd
cmd="python3 buckingham_pareto.py"

echo The command is: $cmd
echo End PBS script information. 
echo All further output is from the process being run and not the pbs script.\n\n
$cmd

# Print the date again -- when finished
echo Finished at: `date`
